(()=>{var t={789:t=>{class e{static dimensions={width:3,height:8};static moveOffset=10;eventBus=null;id="";position={top:0,left:0};eventHandlers={tick:t=>{this.move()}};constructor(t,i,s){this.eventBus=s,this.id="bullet-"+Math.random().toString(36).substring(10),this.position=this.calculateInitialPosition(t,i),this.eventBus.on("tick",this.eventHandlers.tick),this.eventBus.emit("BulletFired",{id:this.id,dimensions:e.dimensions,position:this.position})}destructor(){this.eventBus.off("tick",this.eventHandlers.tick)}calculateInitialPosition(t,i){return{top:t.top-e.dimensions.height,left:t.left+i.width/2}}move(){let t=this.position.top-e.moveOffset;t>0?(this.position.top=t,this.eventBus.emit("BulletMoved",{id:this.id,position:this.position})):this.eventBus.emit("BulletDestroyed",{id:this.id})}}t.exports={Bullet:e}},542:t=>{class e{static dimensions={width:100,height:30};static moveOffset=25;eventBus=null;id="";position={top:0,left:0};eventHandlers={bulletMoved:t=>{this.checkBullet(t.detail)}};constructor(t,i){this.eventBus=i,this.id="evader-"+Math.random().toString(36).substring(10),this.position={top:t.top,left:t.left},this.eventBus.emit("EvaderCreated",{id:this.id,dimensions:e.dimensions,position:this.position}),this.eventBus.on("BulletMoved",this.eventHandlers.bulletMoved)}destructor(){this.eventBus.off("BulletMoved",this.eventHandlers.bulletMoved)}checkBullet(t){this.position.top+e.dimensions.height>=t.position.top&&this.position.left<=t.position.left&&this.position.left+e.dimensions.width>t.position.left&&(this.eventBus.emit("BulletDestroyed",{id:t.id}),this.eventBus.emit("EvaderDestroyed",{id:this.id}))}}t.exports={Evader:e}},487:(t,e,i)=>{const{Evader:s}=i(542);class n{static count=36;static itemsInRow=6;static separation={top:20,left:20};eventBus=null;evaders={};constructor(t){this.eventBus=t;let e=this.calculateInitialPosition(),i={top:e.top,left:e.left};for(let t=1;t<=n.count;t++){let o=new s(i,this.eventBus);t>0&&t%n.itemsInRow==0?(i.top=i.top+s.dimensions.height+n.separation.top,i.left=e.left):i.left=i.left+s.dimensions.width+n.separation.left,this.evaders[o.id]=o}this.eventBus.on("EvaderDestroyed",(t=>{this.evaders[t.detail.id].destructor(),delete this.evaders[t.detail.id]}))}calculateInitialPosition(){let t=document.getElementById("canvas").getBoundingClientRect(),e=n.separation.top,i=n.count/n.itemsInRow*s.dimensions.width,o=(n.count/n.itemsInRow-1)*n.separation.left;return{top:e,left:(t.width-(i+o))/2}}}t.exports={Evaders:n}},383:t=>{t.exports={EventBus:class{bus=null;constructor(t){let[e]=document.getElementsByTagName("body");this.bus=e.appendChild(new Comment(t))}on(t,e){this.bus.addEventListener(t,e)}off(t,e){this.bus.removeEventListener(t,e)}emit(t,e){this.bus.dispatchEvent(new CustomEvent(t,{detail:e}))}}}},620:(t,e,i)=>{const{Player:s}=i(4),{Evaders:n}=i(487);t.exports={Game:class{player=null;evaders=null;constructor(t){this.player=new s(t),this.evaders=new n(t),setInterval((()=>{t.emit("tick")}),50)}}}},4:(t,e,i)=>{const{Bullet:s}=i(789);class n{static dimensions={width:100,height:30};static moveOffset=25;eventBus=null;position={left:0,top:0};bullets={};eventHandlers={moveLeft:t=>{this.moveLeft()},moveRight:t=>{this.moveRight()},fire:t=>{this.fire()}};constructor(t){this.eventBus=t,this.position=this.calculateInitialPosition(),this.eventBus.on("Input:ArrowLeft",this.eventHandlers.moveLeft),this.eventBus.on("Input:ArrowRight",this.eventHandlers.moveRight),this.eventBus.on("Input:Space",this.eventHandlers.fire),this.eventBus.on("BulletDestroyed",(t=>{this.bullets[t.detail.id].destructor(),delete this.bullets[t.detail.id]})),this.eventBus.emit("PlayerCreated",{dimensions:n.dimensions,position:this.position})}calculateInitialPosition(){let t=document.getElementById("canvas").getBoundingClientRect();return{top:t.height-n.dimensions.height-20,left:(t.width-n.dimensions.width)/2}}moveLeft(){let t=this.position.left-n.moveOffset;t>0&&(this.position.left=t),this.eventBus.emit("PlayerMoved",{position:this.position})}moveRight(){let t=this.position.left+n.moveOffset;t+n.dimensions.width<=document.getElementById("canvas").offsetWidth&&(this.position.left=t),this.eventBus.emit("PlayerMoved",{position:this.position})}fire(){let t=new s(this.position,n.dimensions,this.eventBus);this.bullets[t.id]=t}}t.exports={Player:n}},568:t=>{t.exports={Renderer:class{canvas=null;player=null;constructor(t){this.eventBus=t,this.createCanvas(),this.eventBus.on("PlayerCreated",(t=>{this.createPlayer(t)})),this.eventBus.on("PlayerMoved",(t=>{this.movePlayer(t)})),this.eventBus.on("BulletFired",(t=>{this.createBullet(t)})),this.eventBus.on("BulletMoved",(t=>{this.moveBullet(t)})),this.eventBus.on("BulletDestroyed",(t=>{this.destroyBullet(t)})),this.eventBus.on("EvaderCreated",(t=>{this.createEvader(t)})),this.eventBus.on("EvaderDestroyed",(t=>{this.destroyEvader(t)}))}createCanvas(){this.canvas=document.createElement("div"),this.canvas.id="canvas",this.canvas.style.width=window.innerWidth+"px",this.canvas.style.height=window.innerHeight+"px";let[t]=document.getElementsByTagName("body");t.appendChild(this.canvas)}createPlayer(t){this.player=document.createElement("div"),this.player.id="player",this.player.style.width=t.detail.dimensions.width+"px",this.player.style.height=t.detail.dimensions.height+"px",this.player.style.top=t.detail.position.top+"px",this.player.style.left=t.detail.position.left+"px",this.canvas.append(this.player)}movePlayer(t){this.player.style.left=t.detail.position.left+"px"}createBullet(t){let e=document.createElement("div");e.id=t.detail.id,e.className="bullet",e.style.width=t.detail.dimensions.width+"px",e.style.height=t.detail.dimensions.height+"px",e.style.top=t.detail.position.top+"px",e.style.left=t.detail.position.left+"px",this.canvas.append(e)}moveBullet(t){let e=document.getElementById(t.detail.id);e&&(e.style.top=t.detail.position.top+"px")}destroyBullet(t){let e=document.getElementById(t.detail.id);e&&this.canvas.removeChild(e)}createEvader(t){let e=document.createElement("div");e.id=t.detail.id,e.className="evader",e.style.width=t.detail.dimensions.width+"px",e.style.height=t.detail.dimensions.height+"px",e.style.top=t.detail.position.top+"px",e.style.left=t.detail.position.left+"px",this.canvas.append(e)}destroyEvader(t){let e=document.getElementById(t.detail.id);e&&this.canvas.removeChild(e)}}}}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var o=e[s]={exports:{}};return t[s](o,o.exports,i),o.exports}(()=>{const{EventBus:t}=i(383),{Game:e}=i(620),{Renderer:s}=i(568);window.onload=()=>{let i=new t("event-bus");window.renderer=new s(i),window.game=new e(i),window.onkeydown=t=>{i.emit("Input:"+t.code)}}})()})();